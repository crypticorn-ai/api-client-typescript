import {
  createClient as createNativeClient,
  createConfig,
  type OptionsLegacyParser,
} from '@hey-api/client-fetch';

import type {
  LogoutError,
  LogoutResponse,
  WhoamiError,
  WhoamiResponse,
  CreateUserData,
  CreateUserError,
  CreateUserResponse,
  ResendVerificationEmailData,
  ResendVerificationEmailError,
  ResendVerificationEmailResponse,
  VerifyEmailData,
  VerifyEmailError,
  VerifyEmailResponse,
  UpdateUserData,
  UpdateUserError,
  UpdateUserResponse,
  UserByIdData,
  UserByIdError,
  UserByIdResponse,
  UserByUsernameData,
  UserByUsernameError,
  UserByUsernameResponse,
  UserListError,
  UserListResponse,
  SendPasswordResetEmailData,
  SendPasswordResetEmailError,
  SendPasswordResetEmailResponse,
  UserSetPasswordData,
  UserSetPasswordError,
  UserSetPasswordResponse,
  UserResetPasswordData,
  UserResetPasswordError,
  UserResetPasswordResponse,
  LinkLicenseData,
  LinkLicenseError,
  LinkLicenseResponse,
  UnlinkLicenseError,
  UnlinkLicenseResponse,
  GetLicenseError,
  GetLicenseResponse,
  RotateTokensError,
  RotateTokensResponse,
  RefreshTokenScopesError,
  RefreshTokenScopesResponse,
  RevokeAllSessionsError,
  RevokeAllSessionsResponse,
  RevokeUserTokensData,
  RevokeUserTokensError,
  RevokeUserTokensResponse,
  RefreshTokenInfoError,
  RefreshTokenInfoResponse,
  TokenInfoError,
  TokenInfoResponse,
  AuthorizeUserData,
  AuthorizeUserError,
  AuthorizeUserResponse,
  GetGoogleAuthUrlData,
  GetGoogleAuthUrlError,
  GetGoogleAuthUrlResponse,
  OauthCallbackData,
  OauthCallbackError,
  OauthCallbackResponse,
  VerifyError,
  VerifyResponse,
  VerifyApiKeyData,
  VerifyApiKeyError,
  VerifyApiKeyResponse,
  GetApiKeysError,
  GetApiKeysResponse,
  CreateApiKeyData,
  CreateApiKeyError,
  CreateApiKeyResponse,
  DeleteApiKeyData,
  DeleteApiKeyError,
  DeleteApiKeyResponse,
  GetUserScopesError,
  GetUserScopesResponse,
  GetScopesByUserIdData,
  GetScopesByUserIdError,
  GetScopesByUserIdResponse,
  VerifyBasicAuthData,
  VerifyBasicAuthError,
  VerifyBasicAuthResponse,
  GenerateOtpCodeData,
  GenerateOtpCodeError,
  GenerateOtpCodeResponse,
  VerifyOtpCodeData,
  VerifyOtpCodeError,
  VerifyOtpCodeResponse,
  AddWalletData,
  AddWalletError,
  AddWalletResponse,
  UpdateWalletData,
  UpdateWalletError,
  UpdateWalletResponse,
  VerifyWalletData,
  VerifyWalletError,
  VerifyWalletResponse,
  UnlinkWalletData,
  UnlinkWalletError,
  UnlinkWalletResponse,
  ListWalletsData,
  ListWalletsError,
  ListWalletsResponse,
  WalletVerifiedData,
  WalletVerifiedError,
  WalletVerifiedResponse,
  WalletNonceData,
  WalletNonceError,
  WalletNonceResponse,
  AuthorizeWalletData,
  AuthorizeWalletError,
  AuthorizeWalletResponse,
  CreateUserWithWalletData,
  CreateUserWithWalletError,
  CreateUserWithWalletResponse,
} from './types.gen';

export function createClient(
  baseUrl: string,
  headers: any,
  fetch = globalThis.fetch,
) {
  const client = createNativeClient(
    createConfig({
      baseUrl,
      fetch,
      headers,
    }),
  );

  // This file is auto-generated by @hey-api/openapi-ts

  /**
   * Logs out the current user.
   */
  const logout = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      LogoutResponse,
      LogoutError,
      ThrowOnError
    >({
      ...options,
      url: '/logout',
    });
  };

  /**
   * Returns the current user.
   */
  const whoami = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      WhoamiResponse,
      WhoamiError,
      ThrowOnError
    >({
      ...options,
      url: '/whoami',
    });
  };

  /**
   * Creates a new user. Can be created without a password, then the oob code is returned to be used later on. This flow can be used for creating temporary users while maintaining the user ID.
   */
  const createUser = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<CreateUserData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      CreateUserResponse,
      CreateUserError,
      ThrowOnError
    >({
      ...options,
      url: '/create-user',
    });
  };

  /**
   * Resend Verification Email
   * Resends the verification email to the user.
   */
  const resendVerificationEmail = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<ResendVerificationEmailData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      ResendVerificationEmailResponse,
      ResendVerificationEmailError,
      ThrowOnError
    >({
      ...options,
      url: '/resend-verification-email',
    });
  };

  /**
   * Verify Email
   * Verifies the email of the user.
   */
  const verifyEmail = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<VerifyEmailData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      VerifyEmailResponse,
      VerifyEmailError,
      ThrowOnError
    >({
      ...options,
      url: '/verify-email',
    });
  };

  /**
   * Update User
   * Updates the user.
   */
  const updateUser = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UpdateUserData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      UpdateUserResponse,
      UpdateUserError,
      ThrowOnError
    >({
      ...options,
      url: '/update-user',
    });
  };

  /**
   * Returns the user by id.
   */
  const userById = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UserByIdData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      UserByIdResponse,
      UserByIdError,
      ThrowOnError
    >({
      ...options,
      url: '/user-by-id',
    });
  };

  /**
   * Returns a sanitized user object if the user exists.
   */
  const userByUsername = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UserByUsernameData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      UserByUsernameResponse,
      UserByUsernameError,
      ThrowOnError
    >({
      ...options,
      url: '/user-by-username',
    });
  };

  /**
   * Returns the list of all users. Admin only.
   */
  const userList = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      UserListResponse,
      UserListError,
      ThrowOnError
    >({
      ...options,
      url: '/user-list',
    });
  };

  /**
   * Sends a password reset email to the user.
   */
  const sendPasswordResetEmail = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<SendPasswordResetEmailData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      SendPasswordResetEmailResponse,
      SendPasswordResetEmailError,
      ThrowOnError
    >({
      ...options,
      url: '/send-password-reset-email',
    });
  };

  /**
   * Sets the password for the user.
   */
  const userSetPassword = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UserSetPasswordData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      UserSetPasswordResponse,
      UserSetPasswordError,
      ThrowOnError
    >({
      ...options,
      url: '/user-set-password',
    });
  };

  /**
   * Resets the password for the user.
   */
  const userResetPassword = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UserResetPasswordData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      UserResetPasswordResponse,
      UserResetPasswordError,
      ThrowOnError
    >({
      ...options,
      url: '/user-reset-password',
    });
  };

  /**
   * Links the license to the user.
   */
  const linkLicense = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<LinkLicenseData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      LinkLicenseResponse,
      LinkLicenseError,
      ThrowOnError
    >({
      ...options,
      url: '/license',
    });
  };

  /**
   * Unlinks the license from the user.
   */
  const unlinkLicense = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).delete<
      UnlinkLicenseResponse,
      UnlinkLicenseError,
      ThrowOnError
    >({
      ...options,
      url: '/license',
    });
  };

  /**
   * Returns the redacted license for the user.
   */
  const getLicense = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetLicenseResponse,
      GetLicenseError,
      ThrowOnError
    >({
      ...options,
      url: '/license',
    });
  };

  /**
   * Rotate tokens
   * Handles token rotation for user authentication. If access token is expired: Uses refresh token to generate a new access token. If access token is still valid: Extends (slides) the current token's expiration date. Returns both updated access and refresh tokens.
   */
  const rotateTokens = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      RotateTokensResponse,
      RotateTokensError,
      ThrowOnError
    >({
      ...options,
      url: '/rotate-tokens',
    });
  };

  /**
   * Refresh token scopes
   * Refresh token scopes for a given user and a valid access token and a valid refresh token. This manually re-creates the access token with the latest scopes, in case the user changed their subscription status, access to certain features. Only works with a valid jwt token.
   */
  const refreshTokenScopes = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      RefreshTokenScopesResponse,
      RefreshTokenScopesError,
      ThrowOnError
    >({
      ...options,
      url: '/refresh-token-scopes',
    });
  };

  /**
   * Revoke all sessions
   * Revoke all sessions for the current user.
   */
  const revokeAllSessions = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      RevokeAllSessionsResponse,
      RevokeAllSessionsError,
      ThrowOnError
    >({
      ...options,
      url: '/revoke-all-sessions',
    });
  };

  /**
   * Revoke user tokens
   * Revoke all tokens for a given user, this resets the authentication state and requires them to login again.
   */
  const revokeUserTokens = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<RevokeUserTokensData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      RevokeUserTokensResponse,
      RevokeUserTokensError,
      ThrowOnError
    >({
      ...options,
      url: '/revoke-user-tokens',
    });
  };

  /**
   * Refresh token info
   * Returns the user session record of the refresh token.
   */
  const refreshTokenInfo = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      RefreshTokenInfoResponse,
      RefreshTokenInfoError,
      ThrowOnError
    >({
      ...options,
      url: '/refresh-token-info',
    });
  };

  /**
   * Token info
   * Returns the payload of the access token.
   */
  const tokenInfo = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      TokenInfoResponse,
      TokenInfoError,
      ThrowOnError
    >({
      ...options,
      url: '/token-info',
    });
  };

  /**
   * Authorize a user
   * Authorize a user with email and password from the login page, uses a captcha to prevent bots.
   */
  const authorizeUser = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<AuthorizeUserData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      AuthorizeUserResponse,
      AuthorizeUserError,
      ThrowOnError
    >({
      ...options,
      url: '/authorize',
    });
  };

  /**
   * Get Google Auth URL
   * Returns the Google Auth URL for the user to login with Google.
   */
  const getGoogleAuthUrl = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetGoogleAuthUrlData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetGoogleAuthUrlResponse,
      GetGoogleAuthUrlError,
      ThrowOnError
    >({
      ...options,
      url: '/get-google-auth-url',
    });
  };

  /**
   * OAuth Callback
   * Handles the OAuth callback from Google.
   */
  const oauthCallback = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<OauthCallbackData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      OauthCallbackResponse,
      OauthCallbackError,
      ThrowOnError
    >({
      ...options,
      url: '/oauth-callback',
    });
  };

  /**
   * Verify Authentication
   * Verifies the authentication is valid. Returns the auth payload or raises an error.
   */
  const verify = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      VerifyResponse,
      VerifyError,
      ThrowOnError
    >({
      ...options,
      url: '/verify',
    });
  };

  /**
   * @deprecated
   * Verify API Key
   * Verifies the API key is valid. Deprecated, use /verify instead.
   */
  const verifyApiKey = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<VerifyApiKeyData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      VerifyApiKeyResponse,
      VerifyApiKeyError,
      ThrowOnError
    >({
      ...options,
      url: '/verify-api-key',
    });
  };

  /**
   * Get API Keys
   * Gets all API keys for the user.
   */
  const getApiKeys = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetApiKeysResponse,
      GetApiKeysError,
      ThrowOnError
    >({
      ...options,
      url: '/get-api-keys',
    });
  };

  /**
   * Create API Key
   * Creates a new API key for the user.
   */
  const createApiKey = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<CreateApiKeyData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      CreateApiKeyResponse,
      CreateApiKeyError,
      ThrowOnError
    >({
      ...options,
      url: '/create-api-key',
    });
  };

  /**
   * Delete API Key
   * Deletes an API key for the user.
   */
  const deleteApiKey = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<DeleteApiKeyData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).delete<
      DeleteApiKeyResponse,
      DeleteApiKeyError,
      ThrowOnError
    >({
      ...options,
      url: '/delete-api-key',
    });
  };

  /**
   * @deprecated
   * Get User Scopes
   * Gets the scopes for the user. Deprecated, use /verify instead and get the scopes from the auth payload.
   */
  const getUserScopes = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetUserScopesResponse,
      GetUserScopesError,
      ThrowOnError
    >({
      ...options,
      url: '/get-user-scopes',
    });
  };

  /**
   * Get Scopes by User ID
   * Gets the scopes for the user by user id.
   */
  const getScopesByUserId = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetScopesByUserIdData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetScopesByUserIdResponse,
      GetScopesByUserIdError,
      ThrowOnError
    >({
      ...options,
      url: '/get-scopes-by-user-id',
    });
  };

  /**
   * Verify Basic Auth
   * Verifies the basic authentication credentials.
   */
  const verifyBasicAuth = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<VerifyBasicAuthData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      VerifyBasicAuthResponse,
      VerifyBasicAuthError,
      ThrowOnError
    >({
      ...options,
      url: '/verify-basic-auth',
    });
  };

  /**
   * Generate OTP Code
   * Generates a new OTP code for the user.
   */
  const generateOtpCode = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GenerateOtpCodeData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      GenerateOtpCodeResponse,
      GenerateOtpCodeError,
      ThrowOnError
    >({
      ...options,
      url: '/otp/generate',
    });
  };

  /**
   * Verify OTP Code
   * Verifies a new OTP code for the user and deletes the code.
   */
  const verifyOtpCode = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<VerifyOtpCodeData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      VerifyOtpCodeResponse,
      VerifyOtpCodeError,
      ThrowOnError
    >({
      ...options,
      url: '/otp/verify',
    });
  };

  /**
   * Add a wallet to the user
   * Add a wallet to the user
   */
  const addWallet = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<AddWalletData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      AddWalletResponse,
      AddWalletError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet/add',
    });
  };

  /**
   * Update a wallet
   * Update a wallet
   */
  const updateWallet = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UpdateWalletData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).put<
      UpdateWalletResponse,
      UpdateWalletError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet',
    });
  };

  /**
   * Verify a wallet
   * Verify a wallet by signing a message
   */
  const verifyWallet = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<VerifyWalletData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      VerifyWalletResponse,
      VerifyWalletError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet/verify',
    });
  };

  /**
   * Unlink a wallet
   * Unlink a wallet from the user
   */
  const unlinkWallet = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UnlinkWalletData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      UnlinkWalletResponse,
      UnlinkWalletError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet/unlink',
    });
  };

  /**
   * List wallets
   * List the wallets of the user
   */
  const listWallets = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<ListWalletsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      ListWalletsResponse,
      ListWalletsError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet/list',
    });
  };

  /**
   * Check if a wallet is verified
   * Check if a wallet is verified
   */
  const walletVerified = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<WalletVerifiedData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      WalletVerifiedResponse,
      WalletVerifiedError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet/verified',
    });
  };

  /**
   * Generate nonce for SIWE wallet auth
   * Returns an oobCode (nonce) and preformatted SIWE message for the wallet to sign.
   */
  const walletNonce = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<WalletNonceData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      WalletNonceResponse,
      WalletNonceError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet/nonce',
    });
  };

  /**
   * Authorize user with a verified wallet
   * Verifies a signed SIWE message and issues auth tokens if the wallet is linked to an existing user.
   */
  const authorizeWallet = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<AuthorizeWalletData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      AuthorizeWalletResponse,
      AuthorizeWalletError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet/authorize',
    });
  };

  /**
   * Create user using a wallet
   * Registers a new user account that is identified by a wallet only.
   */
  const createUserWithWallet = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<CreateUserWithWalletData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      CreateUserWithWalletResponse,
      CreateUserWithWalletError,
      ThrowOnError
    >({
      ...options,
      url: '/wallet/create-user',
    });
  };

  return {
    logout,
    whoami,
    createUser,
    resendVerificationEmail,
    verifyEmail,
    updateUser,
    userById,
    userByUsername,
    userList,
    sendPasswordResetEmail,
    userSetPassword,
    userResetPassword,
    linkLicense,
    unlinkLicense,
    getLicense,
    rotateTokens,
    refreshTokenScopes,
    revokeAllSessions,
    revokeUserTokens,
    refreshTokenInfo,
    tokenInfo,
    authorizeUser,
    getGoogleAuthUrl,
    oauthCallback,
    verify,
    verifyApiKey,
    getApiKeys,
    createApiKey,
    deleteApiKey,
    getUserScopes,
    getScopesByUserId,
    verifyBasicAuth,
    generateOtpCode,
    verifyOtpCode,
    addWallet,
    updateWallet,
    verifyWallet,
    unlinkWallet,
    listWallets,
    walletVerified,
    walletNonce,
    authorizeWallet,
    createUserWithWallet,
  };
}
