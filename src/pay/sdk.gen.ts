// This file is auto-generated by @hey-api/openapi-ts

import {
  createClient as createNativeClient,
  createConfig,
  type OptionsLegacyParser,
} from "@hey-api/client-fetch";
import type {
  GetNowApiStatusError,
  GetNowApiStatusResponse,
  CreateNowInvoiceData,
  CreateNowInvoiceError,
  CreateNowInvoiceResponse,
  SendNowWebhookData,
  SendNowWebhookError,
  SendNowWebhookResponse,
  GetProductsData,
  GetProductsError,
  GetProductsResponse,
  CreateProductData,
  CreateProductError,
  CreateProductResponse,
  UpdateProductData,
  UpdateProductError,
  UpdateProductResponse,
  GetLatestPaymentFromInvoiceData,
  GetLatestPaymentFromInvoiceError,
  GetLatestPaymentFromInvoiceResponse,
  GetPaymentHistoryData,
  GetPaymentHistoryError,
  GetPaymentHistoryResponse,
  GetSubscriptionsData,
  GetSubscriptionsError,
  GetSubscriptionsResponse,
  PingError,
  PingResponse,
} from "./types.gen";
export function createClient(
  baseUrl: string,
  headers: any,
  fetch = globalThis.fetch,
) {
  const client = createNativeClient(
    createConfig({
      baseUrl,
      fetch,
      headers,
    }),
  );

  /**
   * Get Status
   * Get NOWPayments API status
   */
  const getNowApiStatus = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetNowApiStatusResponse,
      GetNowApiStatusError,
      ThrowOnError
    >({
      ...options,
      url: "/now/status",
    });
  };

  /**
   * Create Invoice
   * Create a payment invoice with a payment link for customer completion
   */
  const createNowInvoice = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<CreateNowInvoiceData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      CreateNowInvoiceResponse,
      CreateNowInvoiceError,
      ThrowOnError
    >({
      ...options,
      url: "/now/invoice",
    });
  };

  /**
   * Handle Webhook
   * Handle NOWPayments webhook notifications (IPN).
   * Validates the signature, updates the payment status and creates a product subscription if the payment is successful.
   */
  const sendNowWebhook = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<SendNowWebhookData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      SendNowWebhookResponse,
      SendNowWebhookError,
      ThrowOnError
    >({
      ...options,
      url: "/now/webhook",
    });
  };

  /**
   * Get Products
   * Get all products
   */
  const getProducts = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetProductsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetProductsResponse,
      GetProductsError,
      ThrowOnError
    >({
      ...options,
      url: "/products",
    });
  };

  /**
   * Create Product
   * Create a new product
   */
  const createProduct = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<CreateProductData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      CreateProductResponse,
      CreateProductError,
      ThrowOnError
    >({
      ...options,
      url: "/products",
    });
  };

  /**
   * Update Product
   * Update an existing product
   */
  const updateProduct = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UpdateProductData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).put<
      UpdateProductResponse,
      UpdateProductError,
      ThrowOnError
    >({
      ...options,
      url: "/products/{id}",
    });
  };

  /**
   * Get Latest Payment From Invoice
   * Get the latest payment from an invoice
   */
  const getLatestPaymentFromInvoice = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetLatestPaymentFromInvoiceData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetLatestPaymentFromInvoiceResponse,
      GetLatestPaymentFromInvoiceError,
      ThrowOnError
    >({
      ...options,
      url: "/payments",
    });
  };

  /**
   * Get Payments
   * Get combined payment history for a user across all payment services.
   */
  const getPaymentHistory = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetPaymentHistoryData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetPaymentHistoryResponse,
      GetPaymentHistoryError,
      ThrowOnError
    >({
      ...options,
      url: "/payments/history",
    });
  };

  /**
   * Get Subscriptions
   */
  const getSubscriptions = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetSubscriptionsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetSubscriptionsResponse,
      GetSubscriptionsError,
      ThrowOnError
    >({
      ...options,
      url: "/payments/subscriptions",
    });
  };

  /**
   * Ping
   */
  const ping = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      PingResponse,
      PingError,
      ThrowOnError
    >({
      ...options,
      url: "/",
    });
  };

  return {
    getNowApiStatus,
    createNowInvoice,
    sendNowWebhook,
    getProducts,
    createProduct,
    updateProduct,
    getLatestPaymentFromInvoice,
    getPaymentHistory,
    getSubscriptions,
    ping,
  };
}
