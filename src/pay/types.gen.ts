// This file is auto-generated by @hey-api/openapi-ts

export type HTTPValidationError = {
  detail?: Array<ValidationError>;
};

/**
 * Response for the API status.
 */
export type NowAPIStatusRes = {
  /**
   * API status message
   */
  message: string;
};

/**
 * Request model for creating a payment invoice.
 *
 * Creates a payment link where the customer can complete the payment.
 * With this method, the customer is required to follow the generated url to complete the payment.
 *
 * https://documenter.getpostman.com/view/7907941/2s93JusNJt#f5e4e645-dce2-4b06-b2ca-2a29aaa5e845
 */
export type NowCreateInvoiceReq = {
  /**
   * Amount to pay in fiat currency
   */
  price_amount: number;
  /**
   * Fiat currency for the price (usd, eur, etc)
   */
  price_currency: string;
  /**
   * Specific cryptocurrency or enabled fiat currency. If not specified, can be chosen on invoice_url
   */
  pay_currency?: string | null;
  /**
   * URL to receive callbacks, must contain http/https
   */
  ipn_callback_url?: string | null;
  /**
   * Internal store order ID
   */
  order_id?: string | null;
  /**
   * Internal store order description
   */
  order_description?: string | null;
  /**
   * URL for redirect after successful payment
   */
  success_url?: string | null;
  /**
   * URL for redirect after failed payment
   */
  cancel_url?: string | null;
  /**
   * URL for redirect after partial payment
   */
  partially_paid_url?: string | null;
  /**
   * Enable fixed-rate exchanges (rate frozen for 20 minutes)
   */
  is_fixed_rate?: boolean | null;
  /**
   * Enable fixed-rate exchanges with all fees paid by users
   */
  is_fee_paid_by_user?: boolean | null;
};

/**
 * Response model for created invoice.
 * https://documenter.getpostman.com/view/7907941/2s93JusNJt#f5e4e645-dce2-4b06-b2ca-2a29aaa5e845
 */
export type NowCreateInvoiceRes = {
  /**
   * Invoice ID
   */
  id: string;
  /**
   * Internal identifier
   */
  token_id: string;
  /**
   * Order ID specified in request
   */
  order_id?: string | null;
  /**
   * Order description specified in request
   */
  order_description?: string | null;
  /**
   * Base price in fiat
   */
  price_amount: string;
  /**
   * Ticker of base fiat currency
   */
  price_currency: string;
  /**
   * Currency customer will pay with
   */
  pay_currency?: string | null;
  /**
   * Link to IPN notifications endpoint
   */
  ipn_callback_url?: string | null;
  /**
   * Link to the payment page
   */
  invoice_url: string;
  /**
   * Redirect URL for successful payment
   */
  success_url?: string | null;
  /**
   * Redirect URL for failed payment
   */
  cancel_url?: string | null;
  /**
   * Redirect URL for partial payment
   */
  partially_paid_url?: string | null;
  /**
   * Ticker of payout currency
   */
  payout_currency?: string | null;
  /**
   * Time of invoice creation
   */
  created_at: string;
  /**
   * Time of latest invoice update
   */
  updated_at: string;
  /**
   * Fixed Rate option status
   */
  is_fixed_rate: boolean;
  /**
   * Fee Paid By User option status
   */
  is_fee_paid_by_user: boolean;
};

/**
 * Fee structure for the payment
 */
export type NowFeeStructure = {
  /**
   * Currency of the fee
   */
  currency: string;
  /**
   * Deposit fee amount
   */
  depositFee: number;
  /**
   * Service fee amount
   */
  serviceFee: number;
  /**
   * Withdrawal fee amount
   */
  withdrawalFee: number;
};

/**
 * Payment status for the payment
 */
export type NowPaymentStatus =
  | "waiting"
  | "confirming"
  | "confirmed"
  | "sending"
  | "partially_paid"
  | "finished"
  | "failed"
  | "refunded"
  | "expired";

/**
 * Model for NOWPayments webhook (IPN) payload.
 */
export type NowWebhookPayload = {
  /**
   * Actually paid amount
   */
  actually_paid: number;
  /**
   * Actually paid amount in fiat currency
   */
  actually_paid_at_fiat: number;
  fee: NowFeeStructure;
  /**
   * Associated invoice ID
   */
  invoice_id: number;
  /**
   * Order description
   */
  order_description: string;
  /**
   * Internal order ID
   */
  order_id: string;
  /**
   * Outcome amount
   */
  outcome_amount: number;
  /**
   * Outcome currency
   */
  outcome_currency: string;
  /**
   * Payment ID of parent payment
   */
  parent_payment_id?: number | null;
  /**
   * Payment destination address
   */
  pay_address: string;
  /**
   * Amount to pay
   */
  pay_amount: number;
  /**
   * Payment currency
   */
  pay_currency: string;
  /**
   * Unique payment identifier
   */
  payment_id: number;
  /**
   * Current payment status
   */
  payment_status: NowPaymentStatus;
  /**
   * Original price amount
   */
  price_amount: number;
  /**
   * Original price currency
   */
  price_currency: string;
  /**
   * Purchase ID
   */
  purchase_id: string;
  /**
   * Payment last update timestamp in milliseconds
   */
  updated_at: number;
  [key: string]: unknown | number | NowFeeStructure | string | NowPaymentStatus;
};

/**
 * Payment status
 */
export type PaymentStatus =
  | "waiting"
  | "processing"
  | "paid"
  | "partially_paid"
  | "refunded"
  | "failed"
  | "cancelled";

/**
 * Model for creating a product
 */
export type ProductCreate = {
  /**
   * Product name
   */
  name: string;
  /**
   * Product price
   */
  price: number;
  /**
   * Scopes that product provides
   */
  scopes?: Array<Scope> | null;
  /**
   * Product duration in days. 0 means unlimited.
   */
  duration: number;
  /**
   * Product description
   */
  description: string;
  /**
   * Product is active
   */
  is_active: boolean;
};

/**
 * Product subscription model
 */
export type ProductSubs = {
  /**
   * Database ID of the object.
   */
  id?: string | null;
  /**
   * User ID
   */
  user_id: string;
  /**
   * Product ID
   */
  product_id: string;
  /**
   * Access from timestamp in milliseconds
   */
  access_from: number;
  /**
   * Access until timestamp in milliseconds. 0 means unlimited.
   */
  access_until: number;
};

/**
 * Model for updating a product
 */
export type ProductUpdate = {
  /**
   * Product name
   */
  name?: string | null;
  /**
   * Product price
   */
  price?: number | null;
  /**
   * Scopes that product provides
   */
  scopes?: Array<Scope> | null;
  /**
   * Product duration in days. 0 means unlimited.
   */
  duration?: number | null;
  /**
   * Product description
   */
  description?: string | null;
  /**
   * Product is active
   */
  is_active?: boolean | null;
};

/**
 * The permission scopes for the API.
 */
export type Scope =
  | "read:hive:model"
  | "read:hive:data"
  | "write:hive:model"
  | "read:trade:bots"
  | "write:trade:bots"
  | "read:trade:exchangekeys"
  | "write:trade:exchangekeys"
  | "read:trade:orders"
  | "read:trade:actions"
  | "write:trade:actions"
  | "read:trade:exchanges"
  | "read:trade:futures"
  | "write:trade:futures"
  | "read:trade:notifications"
  | "write:trade:notifications"
  | "read:trade:strategies"
  | "write:trade:strategies"
  | "read:pay:payments"
  | "read:pay:products"
  | "write:pay:products"
  | "read:pay:now"
  | "write:pay:now"
  | "read:predictions";

/**
 * Available payment services
 */
export type Services = "now";

/**
 * Combined payment model across all services
 */
export type UnifiedPayment = {
  /**
   * Payment ID
   */
  id: string;
  /**
   * Product ID
   */
  product_id: string;
  /**
   * Payment date in seconds
   */
  date: number;
  /**
   * Payment amount
   */
  amount: number;
  /**
   * Payment currency
   */
  currency: string;
  status: PaymentStatus;
  /**
   * Payment service
   */
  service: Services;
  /**
   * Payment market
   */
  market: string;
};

export type ValidationError = {
  loc: Array<string | number>;
  msg: string;
  type: string;
};

export type PingResponse = unknown;

export type PingError = unknown;

export type GetNowApiStatusResponse = NowAPIStatusRes;

export type GetNowApiStatusError = unknown;

export type CreateNowInvoiceData = {
  body: NowCreateInvoiceReq;
};

export type CreateNowInvoiceResponse = NowCreateInvoiceRes;

export type CreateNowInvoiceError = HTTPValidationError;

export type HandleNowWebhookData = {
  body: NowWebhookPayload;
  headers: {
    /**
     * Signature for the webhook
     */
    "x-nowpayments-sig": string;
  };
};

export type HandleNowWebhookResponse = unknown;

export type HandleNowWebhookError = HTTPValidationError;

export type GetProductsData = {
  query?: {
    /**
     * Limit the number of products returned. 0 means no limit.
     */
    limit?: number;
    /**
     * Offset the number of products returned. 0 means no offset.
     */
    offset?: number;
  };
};

export type GetProductsResponse = Array<ProductCreate>;

export type GetProductsError = HTTPValidationError;

export type CreateProductData = {
  body: ProductCreate;
};

export type CreateProductResponse = unknown;

export type CreateProductError = HTTPValidationError;

export type UpdateProductData = {
  body: ProductUpdate;
  path: {
    /**
     * The ID of the product to update
     */
    id: string;
  };
};

export type UpdateProductResponse = unknown;

export type UpdateProductError = HTTPValidationError;

export type GetLatestPaymentFromInvoiceData = {
  query: {
    /**
     * The invoice ID to get the latest payment from
     */
    invoice_id: string;
  };
};

export type GetLatestPaymentFromInvoiceResponse = UnifiedPayment;

export type GetLatestPaymentFromInvoiceError = HTTPValidationError;

export type GetPaymentHistoryData = {
  query?: {
    /**
     * Limit the number of payments returned. 0 means no limit.
     */
    limit?: number;
    /**
     * Offset the number of payments returned. 0 means no offset.
     */
    offset?: number;
  };
};

export type GetPaymentHistoryResponse = Array<UnifiedPayment>;

export type GetPaymentHistoryError = HTTPValidationError;

export type GetSubscriptionsData = {
  query?: {
    /**
     * The user ID to get subscriptions for. Defaults to the authenticated user.
     */
    user_id?: string | null;
  };
};

export type GetSubscriptionsResponse = Array<ProductSubs>;

export type GetSubscriptionsError = HTTPValidationError;
