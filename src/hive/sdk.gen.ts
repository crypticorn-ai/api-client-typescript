import {
  createClient as createNativeClient,
  createConfig,
  type OptionsLegacyParser,
} from "@hey-api/client-fetch";

import type {
  PingError,
  PingResponse,
  GetTimeData,
  GetTimeError,
  GetTimeResponse,
  GetConfigError,
  GetConfigResponse,
  CreateModelData,
  CreateModelError,
  CreateModelResponse,
  EvaluateModelData,
  EvaluateModelError,
  EvaluateModelResponse,
  GetModelData,
  GetModelError,
  GetModelResponse,
  DeleteModelData,
  DeleteModelError,
  DeleteModelResponse,
  UpdateModelData,
  UpdateModelError,
  UpdateModelResponse,
  GetModelByNameData,
  GetModelByNameError,
  GetModelByNameResponse,
  GetModelsData,
  GetModelsError,
  GetModelsResponse,
  DownloadDataData,
  DownloadDataError,
  DownloadDataResponse,
  GetDataInfoError,
  GetDataInfoResponse,
} from "./types.gen";

export function createClient(
  baseUrl: string,
  headers: any,
  fetch = globalThis.fetch,
) {
  const client = createNativeClient(
    createConfig({
      baseUrl,
      fetch,
      headers,
    }),
  );

  // This file is auto-generated by @hey-api/openapi-ts

  /**
   * Ping
   * Returns 'OK' if the API is running.
   */
  const ping = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      PingResponse,
      PingError,
      ThrowOnError
    >({
      ...options,
      url: "/",
    });
  };

  /**
   * Time
   * Returns the current time in the specified format.
   */
  const getTime = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetTimeData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetTimeResponse,
      GetTimeError,
      ThrowOnError
    >({
      ...options,
      url: "/time",
    });
  };

  /**
   * Config
   * Returns the version of the crypticorn library and the environment.
   */
  const getConfig = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetConfigResponse,
      GetConfigError,
      ThrowOnError
    >({
      ...options,
      url: "/config",
    });
  };

  /**
   * Create Model
   * Create a new model
   */
  const createModel = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<CreateModelData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      CreateModelResponse,
      CreateModelError,
      ThrowOnError
    >({
      ...options,
      url: "/model/creation",
    });
  };

  /**
   * Evaluate Model
   * Evaluate a model's predictions
   */
  const evaluateModel = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<EvaluateModelData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).post<
      EvaluateModelResponse,
      EvaluateModelError,
      ThrowOnError
    >({
      ...options,
      url: "/model/evaluation/{id}",
    });
  };

  /**
   * Get Model
   * Get a model by ID
   */
  const getModel = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetModelData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetModelResponse,
      GetModelError,
      ThrowOnError
    >({
      ...options,
      url: "/model/{id}",
    });
  };

  /**
   * Delete Model
   * Delete a model
   */
  const deleteModel = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<DeleteModelData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).delete<
      DeleteModelResponse,
      DeleteModelError,
      ThrowOnError
    >({
      ...options,
      url: "/model/{id}",
    });
  };

  /**
   * Update Model
   * Update a model's information
   */
  const updateModel = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<UpdateModelData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).put<
      UpdateModelResponse,
      UpdateModelError,
      ThrowOnError
    >({
      ...options,
      url: "/model/{id}",
    });
  };

  /**
   * Get Model By Name
   * Get a model by name
   */
  const getModelByName = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetModelByNameData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetModelByNameResponse,
      GetModelByNameError,
      ThrowOnError
    >({
      ...options,
      url: "/model/by-name/{name}",
    });
  };

  /**
   * Get All Models
   * List all models
   */
  const getModels = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetModelsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetModelsResponse,
      GetModelsError,
      ThrowOnError
    >({
      ...options,
      url: "/model",
    });
  };

  /**
   * Download Data
   * Get download links for model training data
   */
  const downloadData = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<DownloadDataData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      DownloadDataResponse,
      DownloadDataError,
      ThrowOnError
    >({
      ...options,
      url: "/data",
    });
  };

  /**
   * Get Data Info
   * Get information about available data and options for the latest data version
   */
  const getDataInfo = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetDataInfoResponse,
      GetDataInfoError,
      ThrowOnError
    >({
      ...options,
      url: "/data/info",
    });
  };

  return {
    ping,
    getTime,
    getConfig,
    createModel,
    evaluateModel,
    getModel,
    deleteModel,
    updateModel,
    getModelByName,
    getModels,
    downloadData,
    getDataInfo,
  };
}
