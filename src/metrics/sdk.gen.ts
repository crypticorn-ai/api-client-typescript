import {
  createClient as createNativeClient,
  createConfig,
  type OptionsLegacyParser,
} from "@hey-api/client-fetch";

import type {
  PingError,
  PingResponse,
  GetTimeData,
  GetTimeError,
  GetTimeResponse,
  GetLogLevelError,
  GetLogLevelResponse,
  GetUptimeData,
  GetUptimeError,
  GetUptimeResponse,
  GetMemoryUsageError,
  GetMemoryUsageResponse,
  GetThreadsError,
  GetThreadsResponse,
  GetContainerLimitsError,
  GetContainerLimitsResponse,
  GetDependenciesData,
  GetDependenciesError,
  GetDependenciesResponse,
  GetCurrentMarketcapData,
  GetCurrentMarketcapError,
  GetCurrentMarketcapResponse,
  GetMarketcapSymbolsData,
  GetMarketcapSymbolsError,
  GetMarketcapSymbolsResponse,
  GetMarketcapSymbolsWithOhlcvData,
  GetMarketcapSymbolsWithOhlcvError,
  GetMarketcapSymbolsWithOhlcvResponse,
  GetMarketcapBetweenTimestampsData,
  GetMarketcapBetweenTimestampsError,
  GetMarketcapBetweenTimestampsResponse,
  GetKerIndicatorData,
  GetKerIndicatorError,
  GetKerIndicatorResponse,
  GetSmaIndicatorData,
  GetSmaIndicatorError,
  GetSmaIndicatorResponse,
  GetAvailableExchangesData,
  GetAvailableExchangesError,
  GetAvailableExchangesResponse,
  GetExchangeMappingsData,
  GetExchangeMappingsError,
  GetExchangeMappingsResponse,
  GetAvailableExchangesForMarketData,
  GetAvailableExchangesForMarketError,
  GetAvailableExchangesForMarketResponse,
  GetStableTokensError,
  GetStableTokensResponse,
  GetWrappedTokensError,
  GetWrappedTokensResponse,
  GetQuoteCurrenciesData,
  GetQuoteCurrenciesError,
  GetQuoteCurrenciesResponse,
  GetAvailableMarketsForSymbolData,
  GetAvailableMarketsForSymbolError,
  GetAvailableMarketsForSymbolResponse,
  GetMetricsErrorLogsData,
  GetMetricsErrorLogsError,
  GetMetricsErrorLogsResponse,
} from "./types.gen";

export function createClient(
  baseUrl: string,
  headers: any,
  fetch = globalThis.fetch,
) {
  const client = createNativeClient(
    createConfig({
      baseUrl,
      fetch,
      headers,
    }),
  );

  // This file is auto-generated by @hey-api/openapi-ts

  /**
   * Ping
   * Returns 'OK' if the API is running.
   */
  const ping = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      PingResponse,
      PingError,
      ThrowOnError
    >({
      ...options,
      url: "/",
    });
  };

  /**
   * Time
   * Returns the current time in either ISO or Unix timestamp (seconds) format.
   */
  const getTime = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetTimeData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetTimeResponse,
      GetTimeError,
      ThrowOnError
    >({
      ...options,
      url: "/time",
    });
  };

  /**
   * Get Logging Level
   * Get the log level of the server logger.
   */
  const getLogLevel = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetLogLevelResponse,
      GetLogLevelError,
      ThrowOnError
    >({
      ...options,
      url: "/admin/log-level",
    });
  };

  /**
   * Get Uptime
   * Return the server uptime in seconds or human-readable form.
   */
  const getUptime = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetUptimeData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetUptimeResponse,
      GetUptimeError,
      ThrowOnError
    >({
      ...options,
      url: "/admin/uptime",
    });
  };

  /**
   * Get Memory Usage
   * Resident Set Size (RSS) in MB â€” the actual memory used by the process in RAM.
   * Represents the physical memory footprint. Important for monitoring real usage.
   */
  const getMemoryUsage = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetMemoryUsageResponse,
      GetMemoryUsageError,
      ThrowOnError
    >({
      ...options,
      url: "/admin/memory",
    });
  };

  /**
   * Get Threads
   * Return count and names of active threads.
   */
  const getThreads = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetThreadsResponse,
      GetThreadsError,
      ThrowOnError
    >({
      ...options,
      url: "/admin/threads",
    });
  };

  /**
   * Get Container Limits
   * Return container resource limits from cgroup.
   */
  const getContainerLimits = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetContainerLimitsResponse,
      GetContainerLimitsError,
      ThrowOnError
    >({
      ...options,
      url: "/admin/limits",
    });
  };

  /**
   * List Installed Packages
   * Return a list of installed packages and versions.
   */
  const getDependencies = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetDependenciesData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetDependenciesResponse,
      GetDependenciesError,
      ThrowOnError
    >({
      ...options,
      url: "/admin/dependencies",
    });
  };

  /**
   * Get Current Marketcap
   * Retrieve current marketcap data for all symbols.
   */
  const getCurrentMarketcap = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetCurrentMarketcapData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetCurrentMarketcapResponse,
      GetCurrentMarketcapError,
      ThrowOnError
    >({
      ...options,
      url: "/marketcap/current",
    });
  };

  /**
   * Get Symbols Marketcap Between Timestamps
   * Retrieve marketcap data for symbols between timestamps with optional filtering.
   */
  const getMarketcapSymbols = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetMarketcapSymbolsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetMarketcapSymbolsResponse,
      GetMarketcapSymbolsError,
      ThrowOnError
    >({
      ...options,
      url: "/marketcap/symbols",
    });
  };

  /**
   * Get Symbols Marketcap With Ohlcv
   * Retrieve OHLCV data with marketcap for symbols at a specific timestamp.
   */
  const getMarketcapSymbolsWithOhlcv = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<
      GetMarketcapSymbolsWithOhlcvData,
      ThrowOnError
    >,
  ) => {
    return (options?.client ?? client).get<
      GetMarketcapSymbolsWithOhlcvResponse,
      GetMarketcapSymbolsWithOhlcvError,
      ThrowOnError
    >({
      ...options,
      url: "/marketcap/symbols/ohlcv",
    });
  };

  /**
   * Get Marketcap Between Timestamps
   * Retrieve marketcap data between timestamps.
   */
  const getMarketcapBetweenTimestamps = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<
      GetMarketcapBetweenTimestampsData,
      ThrowOnError
    >,
  ) => {
    return (options?.client ?? client).get<
      GetMarketcapBetweenTimestampsResponse,
      GetMarketcapBetweenTimestampsError,
      ThrowOnError
    >({
      ...options,
      url: "/marketcap",
    });
  };

  /**
   * Get Ker Indicator
   * Calculate and retrieve the KER indicator for a symbol.
   */
  const getKerIndicator = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetKerIndicatorData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetKerIndicatorResponse,
      GetKerIndicatorError,
      ThrowOnError
    >({
      ...options,
      url: "/indicators/ker",
    });
  };

  /**
   * Get Sma Indicator
   * Calculate and retrieve the Simple Moving Average (SMA) indicator for a symbol.
   */
  const getSmaIndicator = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetSmaIndicatorData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetSmaIndicatorResponse,
      GetSmaIndicatorError,
      ThrowOnError
    >({
      ...options,
      url: "/indicators/sma",
    });
  };

  /**
   * Get Available Exchanges
   * Get available exchanges for a symbol with various filtering options.
   */
  const getAvailableExchanges = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetAvailableExchangesData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetAvailableExchangesResponse,
      GetAvailableExchangesError,
      ThrowOnError
    >({
      ...options,
      url: "/exchanges/available",
    });
  };

  /**
   * Get Exchange Mappings
   * Get exchange mappings for a market with optional exchange name filter.
   */
  const getExchangeMappings = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetExchangeMappingsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetExchangeMappingsResponse,
      GetExchangeMappingsError,
      ThrowOnError
    >({
      ...options,
      url: "/exchanges/mappings",
    });
  };

  /**
   * Get Exchange List
   * Get list of exchanges for a market.
   */
  const getAvailableExchangesForMarket = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<
      GetAvailableExchangesForMarketData,
      ThrowOnError
    >,
  ) => {
    return (options?.client ?? client).get<
      GetAvailableExchangesForMarketResponse,
      GetAvailableExchangesForMarketError,
      ThrowOnError
    >({
      ...options,
      url: "/exchanges/list",
    });
  };

  /**
   * Get Stable Tokens
   * Get list of stable tokens.
   */
  const getStableTokens = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetStableTokensResponse,
      GetStableTokensError,
      ThrowOnError
    >({
      ...options,
      url: "/tokens/stables",
    });
  };

  /**
   * Get Wrapped Tokens
   * Get list of wrapped tokens.
   */
  const getWrappedTokens = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetWrappedTokensResponse,
      GetWrappedTokensError,
      ThrowOnError
    >({
      ...options,
      url: "/tokens/wrapped",
    });
  };

  /**
   * Get Quote Currencies
   * Get available quote currencies for a market.
   */
  const getQuoteCurrencies = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetQuoteCurrenciesData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetQuoteCurrenciesResponse,
      GetQuoteCurrenciesError,
      ThrowOnError
    >({
      ...options,
      url: "/quote-currencies",
    });
  };

  /**
   * Get Markets For Symbol
   * Get markets for a symbol with filtering options.
   */
  const getAvailableMarketsForSymbol = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<
      GetAvailableMarketsForSymbolData,
      ThrowOnError
    >,
  ) => {
    return (options?.client ?? client).get<
      GetAvailableMarketsForSymbolResponse,
      GetAvailableMarketsForSymbolError,
      ThrowOnError
    >({
      ...options,
      url: "/markets",
    });
  };

  /**
   * Get Error Logs
   * Get error logs with filtering options.
   */
  const getMetricsErrorLogs = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetMetricsErrorLogsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetMetricsErrorLogsResponse,
      GetMetricsErrorLogsError,
      ThrowOnError
    >({
      ...options,
      url: "/error_logs",
    });
  };

  return {
    ping,
    getTime,
    getLogLevel,
    getUptime,
    getMemoryUsage,
    getThreads,
    getContainerLimits,
    getDependencies,
    getCurrentMarketcap,
    getMarketcapSymbols,
    getMarketcapSymbolsWithOhlcv,
    getMarketcapBetweenTimestamps,
    getKerIndicator,
    getSmaIndicator,
    getAvailableExchanges,
    getExchangeMappings,
    getAvailableExchangesForMarket,
    getStableTokens,
    getWrappedTokens,
    getQuoteCurrencies,
    getAvailableMarketsForSymbol,
    getMetricsErrorLogs,
  };
}
