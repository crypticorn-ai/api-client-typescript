import {
  createClient as createNativeClient,
  createConfig,
  type OptionsLegacyParser,
} from "@hey-api/client-fetch";

import type {
  PingError,
  PingResponse,
  GetTimeData,
  GetTimeError,
  GetTimeResponse,
  GetConfigError,
  GetConfigResponse,
  GetCurrentMarketcapData,
  GetCurrentMarketcapError,
  GetCurrentMarketcapResponse,
  GetMarketcapSymbolsData,
  GetMarketcapSymbolsError,
  GetMarketcapSymbolsResponse,
  GetMarketcapSymbolsWithOhlcvData,
  GetMarketcapSymbolsWithOhlcvError,
  GetMarketcapSymbolsWithOhlcvResponse,
  GetMarketcapBetweenTimestampsData,
  GetMarketcapBetweenTimestampsError,
  GetMarketcapBetweenTimestampsResponse,
  GetKerIndicatorData,
  GetKerIndicatorError,
  GetKerIndicatorResponse,
  GetSmaIndicatorData,
  GetSmaIndicatorError,
  GetSmaIndicatorResponse,
  GetAvailableExchangesData,
  GetAvailableExchangesError,
  GetAvailableExchangesResponse,
  GetStableAndWrappedTokensData,
  GetStableAndWrappedTokensError,
  GetStableAndWrappedTokensResponse,
  GetQuoteCurrenciesData,
  GetQuoteCurrenciesError,
  GetQuoteCurrenciesResponse,
  GetExchangeMappingsData,
  GetExchangeMappingsError,
  GetExchangeMappingsResponse,
  GetAvailableMarketsForSymbolData,
  GetAvailableMarketsForSymbolError,
  GetAvailableMarketsForSymbolResponse,
  GetAvailableExchangesForMarketData,
  GetAvailableExchangesForMarketError,
  GetAvailableExchangesForMarketResponse,
  GetMetricsErrorLogsData,
  GetMetricsErrorLogsError,
  GetMetricsErrorLogsResponse,
} from "./types.gen";

export function createClient(
  baseUrl: string,
  headers: any,
  fetch = globalThis.fetch,
) {
  const client = createNativeClient(
    createConfig({
      baseUrl,
      fetch,
      headers,
    }),
  );

  // This file is auto-generated by @hey-api/openapi-ts

  /**
   * Ping
   * Returns 'OK' if the API is running.
   */
  const ping = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      PingResponse,
      PingError,
      ThrowOnError
    >({
      ...options,
      url: "/",
    });
  };

  /**
   * Time
   * Returns the current time in the specified format.
   */
  const getTime = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetTimeData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetTimeResponse,
      GetTimeError,
      ThrowOnError
    >({
      ...options,
      url: "/time",
    });
  };

  /**
   * Config
   * Returns the version of the crypticorn library and the environment.
   */
  const getConfig = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<unknown, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetConfigResponse,
      GetConfigError,
      ThrowOnError
    >({
      ...options,
      url: "/config",
    });
  };

  /**
   * Get Current Marketcap
   * Retrieve current marketcap data for all symbols.
   */
  const getCurrentMarketcap = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetCurrentMarketcapData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetCurrentMarketcapResponse,
      GetCurrentMarketcapError,
      ThrowOnError
    >({
      ...options,
      url: "/get_current_marketcap",
    });
  };

  /**
   * Get Symbols Marketcap Between Timestamps
   * Retrieve marketcap data for symbols between timestamps with optional filtering.
   */
  const getMarketcapSymbols = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetMarketcapSymbolsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetMarketcapSymbolsResponse,
      GetMarketcapSymbolsError,
      ThrowOnError
    >({
      ...options,
      url: "/marketcap/symbols",
    });
  };

  /**
   * Get Symbols Marketcap With Ohlcv
   * Retrieve OHLCV data with marketcap for symbols at a specific timestamp.
   */
  const getMarketcapSymbolsWithOhlcv = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<
      GetMarketcapSymbolsWithOhlcvData,
      ThrowOnError
    >,
  ) => {
    return (options?.client ?? client).get<
      GetMarketcapSymbolsWithOhlcvResponse,
      GetMarketcapSymbolsWithOhlcvError,
      ThrowOnError
    >({
      ...options,
      url: "/marketcap/symbols/ohlcv",
    });
  };

  /**
   * Get Marketcap Between Timestamps
   * Retrieve marketcap data between timestamps.
   */
  const getMarketcapBetweenTimestamps = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<
      GetMarketcapBetweenTimestampsData,
      ThrowOnError
    >,
  ) => {
    return (options?.client ?? client).get<
      GetMarketcapBetweenTimestampsResponse,
      GetMarketcapBetweenTimestampsError,
      ThrowOnError
    >({
      ...options,
      url: "/marketcap",
    });
  };

  /**
   * Get Ker Indicator
   * Calculate and retrieve the KER indicator for a symbol.
   */
  const getKerIndicator = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetKerIndicatorData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetKerIndicatorResponse,
      GetKerIndicatorError,
      ThrowOnError
    >({
      ...options,
      url: "/ker/{symbol}",
    });
  };

  /**
   * Get Sma Indicator
   * Calculate and retrieve the Simple Moving Average (SMA) indicator for a symbol.
   */
  const getSmaIndicator = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetSmaIndicatorData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetSmaIndicatorResponse,
      GetSmaIndicatorError,
      ThrowOnError
    >({
      ...options,
      url: "/sma/{symbol}",
    });
  };

  /**
   * Get Available Exchanges
   * Get available exchanges for a symbol with various filtering options.
   */
  const getAvailableExchanges = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetAvailableExchangesData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetAvailableExchangesResponse,
      GetAvailableExchangesError,
      ThrowOnError
    >({
      ...options,
      url: "/available_exchanges/{market}/{symbol}",
    });
  };

  /**
   * Get Stable Wrapped Tokens
   * Get list of stable or wrapped tokens.
   */
  const getStableAndWrappedTokens = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetStableAndWrappedTokensData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetStableAndWrappedTokensResponse,
      GetStableAndWrappedTokensError,
      ThrowOnError
    >({
      ...options,
      url: "/tokens/{token_type}",
    });
  };

  /**
   * Get Quote Currencies
   * Get available quote currencies for a market.
   */
  const getQuoteCurrencies = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetQuoteCurrenciesData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetQuoteCurrenciesResponse,
      GetQuoteCurrenciesError,
      ThrowOnError
    >({
      ...options,
      url: "/quote_currencies/{market}",
    });
  };

  /**
   * Get Exchange Mappings
   * Get exchange mappings for a market with optional exchange name filter.
   */
  const getExchangeMappings = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<GetExchangeMappingsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetExchangeMappingsResponse,
      GetExchangeMappingsError,
      ThrowOnError
    >({
      ...options,
      url: "/exchange_mappings/{market}",
    });
  };

  /**
   * Get Markets For Symbol
   * Get markets for a symbol with filtering options.
   */
  const getAvailableMarketsForSymbol = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<
      GetAvailableMarketsForSymbolData,
      ThrowOnError
    >,
  ) => {
    return (options?.client ?? client).get<
      GetAvailableMarketsForSymbolResponse,
      GetAvailableMarketsForSymbolError,
      ThrowOnError
    >({
      ...options,
      url: "/markets/{market}/{symbol}",
    });
  };

  /**
   * Get Exchange List
   * Get list of exchanges for a market.
   */
  const getAvailableExchangesForMarket = <ThrowOnError extends boolean = false>(
    options: OptionsLegacyParser<
      GetAvailableExchangesForMarketData,
      ThrowOnError
    >,
  ) => {
    return (options?.client ?? client).get<
      GetAvailableExchangesForMarketResponse,
      GetAvailableExchangesForMarketError,
      ThrowOnError
    >({
      ...options,
      url: "/exchange_list/{market}",
    });
  };

  /**
   * Get Error Logs
   * Get error logs with filtering options.
   */
  const getMetricsErrorLogs = <ThrowOnError extends boolean = false>(
    options?: OptionsLegacyParser<GetMetricsErrorLogsData, ThrowOnError>,
  ) => {
    return (options?.client ?? client).get<
      GetMetricsErrorLogsResponse,
      GetMetricsErrorLogsError,
      ThrowOnError
    >({
      ...options,
      url: "/error_logs",
    });
  };

  return {
    ping,
    getTime,
    getConfig,
    getCurrentMarketcap,
    getMarketcapSymbols,
    getMarketcapSymbolsWithOhlcv,
    getMarketcapBetweenTimestamps,
    getKerIndicator,
    getSmaIndicator,
    getAvailableExchanges,
    getStableAndWrappedTokens,
    getQuoteCurrencies,
    getExchangeMappings,
    getAvailableMarketsForSymbol,
    getAvailableExchangesForMarket,
    getMetricsErrorLogs,
  };
}
